<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Подробная информация о дилере</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css?v=80">
    <link rel="icon" href="favicon.gif" type="image/gif">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm mb-4">
        <div class="container-fluid">
            <a class="navbar-brand" href="/"><img src="logo.png" alt="Logo" height="40"></a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="/">Дилеры</a></li>
                    <li class="nav-item"><a class="nav-link" href="/map.html">Карта</a></li>
                    <li class="nav-item"><a class="nav-link" href="/products.html">Матрица</a></li>
                    <li class="nav-item"><a class="nav-link" href="/report.html">Выставленность</a></li>
                    <li class="nav-item"><a class="nav-link" href="/sales.html">Продажи</a></li>
                    <li class="nav-item"><a class="nav-link" href="/competitors.html">Конкуренты</a></li>
                    <li class="nav-item"><a class="nav-link" href="/knowledge.html">Статьи</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <div class="container mt-4">
        <div class="details-container p-4 bg-white rounded shadow-sm border">
            
            <div class="dealer-header">
                <img id="dealer-avatar-img" class="dealer-avatar" src="" alt="Avatar">
                <div class="dealer-header-info">
                    <h1 id="dealer-name" class="display-6 mb-0">Загрузка...</h1>
                    <p id="dealer-id-subtitle" class="lead text-muted"></p>
                </div>
                <div class="ms-auto">
                    <a href="index.html" class="btn btn-outline-secondary">← К списку</a>
                    <button id="navigate-btn" class="btn btn-success"><i class="bi bi-geo-alt-fill me-2"></i>Поехать</button>
                    <button id="edit-dealer-btn" class="btn btn-warning"><i class="bi bi-pencil me-2"></i>Редактировать</button>
                    <button id="delete-dealer-btn" class="btn btn-danger"><i class="bi bi-trash me-2"></i>Удалить</button>
                </div>
            </div>
            
            <div id="dealer-links" class="dealer-links-container"></div>

            <ul class="nav nav-tabs mt-4" id="dealerTab" role="tablist">
                <li class="nav-item"><button class="nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#info-pane" type="button"><i class="bi bi-person-vcard me-2"></i>Инфо</button></li>
                <li class="nav-item"><button class="nav-link text-success fw-bold" id="sales-tab" data-bs-toggle="tab" data-bs-target="#sales-pane" type="button"><i class="bi bi-cash-coin me-2"></i>Продажи</button></li>
                <li class="nav-item"><button class="nav-link" id="visits-tab" data-bs-toggle="tab" data-bs-target="#visits-pane" type="button"><i class="bi bi-calendar-check me-2"></i>Визиты</button></li>
                <li class="nav-item"><button class="nav-link" id="contacts-tab" data-bs-toggle="tab" data-bs-target="#contacts-pane" type="button"><i class="bi bi-people me-2"></i>Контакты</button></li>
                <li class="nav-item"><button class="nav-link" id="competitors-tab" data-bs-toggle="tab" data-bs-target="#competitors-pane" type="button"><i class="bi bi-shield-slash me-2"></i>Конкуренты</button></li>
                <li class="nav-item"><button class="nav-link" id="photos-tab" data-bs-toggle="tab" data-bs-target="#photos-pane" type="button"><i class="bi bi-images me-2"></i>Фото</button></li>
                <li class="nav-item"><button class="nav-link" id="products-tab" data-bs-toggle="tab" data-bs-target="#products-pane" type="button"><i class="bi bi-box-seam me-2"></i>Выставленность</button></li>
            </ul>

            <div class="tab-content" id="dealerTabContent">
                
                <div class="tab-pane fade show active" id="info-pane">
                    <h3 class="mt-3">Основная информация</h3>
                    <div id="dealer-info-main"></div>
                    <h3>Дополнительные адреса:</h3>
                    <div id="dealer-addresses-list"><p>Нет данных</p></div>
                    <h3>Условия доставки:</h3>
                    <div id="dealer-delivery" class="products-display"><p>Нет данных</p></div>
                    <h3>Бонусы и примечания:</h3>
                    <div id="dealer-bonuses" class="products-display"><p>Нет данных</p></div>
                </div>

                <div class="tab-pane fade" id="sales-pane">
                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <h3>История продаж</h3>
                        <div class="btn-group">
                            <button class="btn btn-outline-secondary btn-sm" onclick="printDiv('dealer-sales-history', 'История Продаж')"><i class="bi bi-printer me-1"></i>Печать</button>
                            <button class="btn btn-outline-success btn-sm" onclick="exportData('sales')"><i class="bi bi-file-earmark-excel me-1"></i>Скачать</button>
                        </div>
                    </div>
                    <div id="dealer-sales-history"><p class="text-muted">Загрузка...</p></div>
                </div>

                <div class="tab-pane fade" id="visits-pane"><div id="dealer-visits-list"><p>Нет данных</p></div></div>
                <div class="tab-pane fade" id="contacts-pane"><div id="dealer-contacts-list"><p>Нет данных</p></div></div>
                
                <div class="tab-pane fade" id="competitors-pane">
                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <h3>Мониторинг Конкурентов</h3>
                        <div class="btn-group">
                            <button class="btn btn-outline-secondary btn-sm" onclick="printDiv('dealer-competitors-list', 'Мониторинг Конкурентов')"><i class="bi bi-printer me-1"></i>Печать</button>
                            <button class="btn btn-outline-success btn-sm" onclick="exportData('competitors')"><i class="bi bi-file-earmark-excel me-1"></i>Скачать</button>
                        </div>
                    </div>
                    <div id="dealer-competitors-list"><p>Нет данных</p></div>
                </div>
                
                <div class="tab-pane fade" id="photos-pane"><div id="dealer-photo-gallery" class="gallery-container"><p>Нет фото</p></div></div>
                
                <div class="tab-pane fade" id="products-pane">
                    <div class="d-flex justify-content-between align-items-center mt-3">
                        <h3>Выставленность (Матрица)</h3>
                        <div class="btn-group">
                            <button class="btn btn-outline-secondary btn-sm" onclick="printDiv('print-products-area', 'Матрица товаров')"><i class="bi bi-printer me-1"></i>Печать</button>
                            <button class="btn btn-outline-success btn-sm" onclick="exportData('products')"><i class="bi bi-file-earmark-excel me-1"></i>Скачать</button>
                        </div>
                    </div>
                    
                    <div id="print-products-area">
                        <h5 class="mt-3">Оборудование</h5>
                        <div id="dealer-pos-list"><p>Нет данных</p></div>
                        <h5 class="mt-3">Ламинат</h5>
                        <div id="dealer-products-stats"></div>
                        <div id="dealer-products-list"><p>Нет данных</p></div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true"><div class="modal-dialog modal-fullscreen"><div class="modal-content bg-dark"><div class="modal-header border-0"><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body d-flex justify-content-center align-items-center position-relative"><div id="photoCarousel" class="carousel slide" style="width: 100%; height: 100%;"><div class="carousel-inner" id="carousel-inner" style="height: 100%;"></div><button class="carousel-control-prev" type="button" data-bs-target="#photoCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span></button><button class="carousel-control-next" type="button" data-bs-target="#photoCarousel" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span></button></div></div></div></div></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="dealer.js?v=80"></script>
</body>
</html>
