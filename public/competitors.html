<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Конкуренты</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css?v=52"> 
    <link rel="icon" href="favicon.gif" type="image/gif">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm mb-4">
        <div class="container-fluid">
            <a class="navbar-brand" href="/"><img src="logo.png" alt="Logo" height="40"></a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="/">Дилеры</a></li>
                    <li class="nav-item"><a class="nav-link" href="/map.html">Карта</a></li>
                    <li class="nav-item"><a class="nav-link" href="/products.html">Матрица</a></li>
                    <li class="nav-item"><a class="nav-link" href="/report.html">Выставленность</a></li>
                    <li class="nav-item"><a class="nav-link" href="/sales.html">Продажи</a></li>
                    <li class="nav-item"><a class="nav-link active" href="/competitors.html">Конкуренты</a></li>
                    <li class="nav-item"><a class="nav-link" href="/knowledge.html">Статьи</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>База Конкурентов</h1>
            <button id="add-comp-btn" class="btn btn-primary btn-lg"><i class="bi bi-plus-lg me-2"></i>Добавить Бренд</button>
        </div>

        <div class="row g-3 mb-4 search-bar-container bg-white p-3 rounded shadow-sm border">
            <div class="col-md-6">
                <input type="text" id="search-input" class="form-control" placeholder="Поиск по бренду, поставщику или складу...">
            </div>
           <div class="col-md-3">
    <select id="filter-type" class="form-select">
        <option value="all">Все типы</option>
        <option value="std">Стандарт (Обычный)</option>
        <option value="eng">Английская Елка</option>
        <option value="fr">Французская Елка</option>
        <option value="art">Художественный</option>
        <option value="art_eng">Худ. Английская</option>
        <option value="art_fr">Худ. Французская</option>
        <option value="mix">Худ. Микс</option>
    </select>
</div>
            <div class="col-md-3">
                </div>
        </div>

        <div id="competitors-grid" class="row g-3">
            <p class="text-center text-muted p-5">Загрузка базы...</p>
        </div>
    </div>

    <div class="modal fade" id="comp-modal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="comp-modal-title">Бренд</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="comp-form">
                        <input type="hidden" id="comp_id">
                        
                        <div class="mb-3">
                            <label class="form-label">Название Бренда *</label>
                            <input type="text" class="form-control fw-bold" id="comp_name" required>
                        </div>

                        <div class="row g-3 mb-3">
                            <div class="col-md-6"><label class="form-label">Поставщик</label><input type="text" class="form-control" id="comp_supplier"></div>
                            <div class="col-md-6"><label class="form-label">Склад (Город)</label><input type="text" class="form-control" id="comp_warehouse"></div>
                        </div>

                        <div class="row g-3 mb-3 p-3 bg-light border rounded mx-0">
                            <div class="col-md-4"><label class="form-label small">Срок хранения</label><input type="text" class="form-control form-control-sm" id="comp_storage"></div>
                            <div class="col-md-4"><label class="form-label small">Остатки</label><input type="text" class="form-control form-control-sm" id="comp_stock"></div>
                            <div class="col-md-4"><label class="form-label small">Резерв (дни)</label><input type="text" class="form-control form-control-sm" id="comp_reserve"></div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">Контакты:</label>
                            <div id="comp-contacts-list" class="list-container"></div>
                            <div class="text-end"><button type="button" class="btn btn-sm btn-outline-primary mt-2" id="btn-add-contact">+ Контакт</button></div>
                        </div>

                        <hr>
                        
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <label class="form-label fw-bold mb-0">Коллекции и Типы:</label>
                            <button type="button" class="btn btn-sm btn-success" id="add-coll-row-btn">+ Коллекция</button>
                        </div>
                        <div id="collections-container" class="list-container mb-3" style="max-height: 300px;"></div>
                        
                        <div class="mb-3">
                            <label class="form-label">Доп. заметки</label>
                            <textarea class="form-control" id="comp_info" rows="2"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-outline-danger" id="btn-delete-comp" style="display:none;">Удалить</button>
                    <div>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                        <button type="submit" form="comp-form" class="btn btn-primary">Сохранить</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="competitors.js?v=52"></script>
</body>
</html>
